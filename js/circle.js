document.addEventListener('DOMContentLoaded', (event) => {

    var main = document.getElementById('main');
    
    const json = `{"v":"5.7.5","fr":25,"ip":0,"op":92,"w":1160,"h":1144,"nm":"Composizione 1","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":0,"nm":"pre1","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[960,540,0],"ix":2,"l":2},"a":{"a":0,"k":[960,540,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"w":1920,"h":1080,"ip":8,"op":189,"st":8,"bm":0},{"ddd":0,"ind":2,"ty":0,"nm":"pre1","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[1194,944,0],"ix":2,"l":2},"a":{"a":0,"k":[960,540,0],"ix":1,"l":2},"s":{"a":0,"k":[175.741,175.741,100],"ix":6,"l":2}},"ao":0,"w":1920,"h":1080,"ip":9,"op":190,"st":9,"bm":0},{"ddd":0,"ind":3,"ty":0,"nm":"pre1","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[1388,1310,0],"ix":2,"l":2},"a":{"a":0,"k":[960,540,0],"ix":1,"l":2},"s":{"a":0,"k":[234.537,234.537,100],"ix":6,"l":2}},"ao":0,"w":1920,"h":1080,"ip":10,"op":191,"st":10,"bm":0},{"ddd":0,"ind":4,"ty":0,"nm":"pre1","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[1562,1634,0],"ix":2,"l":2},"a":{"a":0,"k":[960,540,0],"ix":1,"l":2},"s":{"a":0,"k":[272.037,272.037,100],"ix":6,"l":2}},"ao":0,"w":1920,"h":1080,"ip":12,"op":193,"st":12,"bm":0},{"ddd":0,"ind":5,"ty":0,"nm":"pre1","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[1512,1658.5,0],"ix":2,"l":2},"a":{"a":0,"k":[960,540,0],"ix":1,"l":2},"s":{"a":0,"k":[234.537,234.537,100],"ix":6,"l":2}},"ao":0,"w":1920,"h":1080,"ip":14,"op":195,"st":14,"bm":0},{"ddd":0,"ind":6,"ty":0,"nm":"pre1","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[1450,1564,0],"ix":2,"l":2},"a":{"a":0,"k":[960,540,0],"ix":1,"l":2},"s":{"a":0,"k":[179.491,179.491,100],"ix":6,"l":2}},"ao":0,"w":1920,"h":1080,"ip":15,"op":196,"st":15,"bm":0},{"ddd":0,"ind":7,"ty":0,"nm":"pre1","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[1300,1336,0],"ix":2,"l":2},"a":{"a":0,"k":[960,540,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"w":1920,"h":1080,"ip":17,"op":198,"st":17,"bm":0}]},{"id":"comp_1","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"primo","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[714,139.333,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[45.835,49.073,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[366,-164],[-375,149]],"c":false},"ix":2},"nm":"Tracciato 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Forma 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gs","o":{"a":0,"k":100,"ix":9},"w":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":1,"s":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":65,"s":[32]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":77,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":99,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":102,"s":[32]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":115,"s":[32]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":122,"s":[60]},{"t":129,"s":[32]}],"ix":10},"g":{"p":3,"k":{"a":0,"k":[0,0.732,0.125,0.125,0.596,0.501,0.084,0.084,1,0.271,0.044,0.044],"ix":8}},"s":{"a":0,"k":[-310.45,119.101],"ix":4},"e":{"a":0,"k":[329.625,-141.573],"ix":5},"t":2,"h":{"a":0,"k":0,"ix":6},"a":{"a":0,"k":0,"ix":7},"lc":2,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":13},"bm":0,"nm":"Gradient Stroke 1","mn":"ADBE Vector Graphic - G-Stroke","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.612],"y":[1]},"o":{"x":[0.837],"y":[0]},"t":51,"s":[100]},{"i":{"x":[0.724],"y":[1]},"o":{"x":[0.782],"y":[0]},"t":65,"s":[0]},{"i":{"x":[0.878],"y":[1]},"o":{"x":[1],"y":[0]},"t":99,"s":[0]},{"t":109,"s":[100]}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":3,"nm":"Taglia tracciati 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":193,"st":-2,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"primoB","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[707,127.333,0],"ix":2,"l":2},"a":{"a":0,"k":[396.5,216.5,0],"ix":1,"l":2},"s":{"a":0,"k":[48.041,47.357,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[20.297,60.37],[202.034,-80.43],[-20.297,-60.369],[-202.035,80.431]],"o":[[-20.297,-60.369],[-202.034,80.43],[20.297,60.369],[202.033,-80.43]],"v":[[365.815,-145.632],[-36.751,-109.308],[-365.815,145.631],[36.752,109.308]],"c":true},"ix":2},"nm":"Tracciato 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gs","o":{"a":0,"k":100,"ix":9},"w":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":65,"s":[32]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":68,"s":[26]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":95,"s":[26]},{"t":100,"s":[32]}],"ix":10},"g":{"p":3,"k":{"a":0,"k":[0,0.732,0.125,0.125,0.596,0.501,0.084,0.084,1,0.271,0.043,0.043],"ix":8}},"s":{"a":0,"k":[-310.45,119.101],"ix":4},"e":{"a":0,"k":[329.625,-141.573],"ix":5},"t":2,"h":{"a":0,"k":-21,"ix":6},"a":{"a":0,"k":0,"ix":7},"lc":2,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":13},"bm":0,"nm":"Gradient Stroke 1","mn":"ADBE Vector Graphic - G-Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[396.112,216.001],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"fascia1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":86,"s":[0]},{"t":101,"s":[97]}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.853],"y":[0]},"t":64,"s":[0]},{"t":101,"s":[100]}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Taglia tracciati 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":63,"op":101,"st":72,"bm":0}]}],"layers":[{"ddd":0,"ind":3,"ty":0,"nm":"sfera","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":180,"ix":10},"p":{"a":0,"k":[506,542,0],"ix":2,"l":2},"a":{"a":0,"k":[960,540,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":0,"k":{"i":[[246.871,0],[0,-246.871],[-246.871,0],[0,246.871]],"o":[[-246.871,0],[0,246.871],[246.871,0],[0,-246.871]],"v":[[881,94],[434,541],[881,988],[1328,541]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":9,"s":[0]},{"i":{"x":[0.63],"y":[-2.091]},"o":{"x":[0.167],"y":[0]},"t":16,"s":[238]},{"i":{"x":[0.582],"y":[1.003]},"o":{"x":[0.322],"y":[0]},"t":68,"s":[238]},{"t":77,"s":[0]}],"ix":4},"nm":"Mask 1"}],"w":1920,"h":1080,"ip":0,"op":92,"st":-59,"bm":0},{"ddd":0,"ind":4,"ty":0,"nm":"sfera","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[674,548,0],"ix":2,"l":2},"a":{"a":0,"k":[960,540,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":0,"k":{"i":[[246.871,0],[0,-246.871],[-246.871,0],[0,246.871]],"o":[[-246.871,0],[0,246.871],[246.871,0],[0,-246.871]],"v":[[881,94],[434,541],[881,988],[1328,541]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":9,"s":[0]},{"i":{"x":[0.63],"y":[-2.091]},"o":{"x":[0.167],"y":[0]},"t":16,"s":[238]},{"i":{"x":[0.582],"y":[1.003]},"o":{"x":[0.322],"y":[0]},"t":68,"s":[238]},{"t":77,"s":[0]}],"ix":4},"nm":"Mask 1"}],"w":1920,"h":1080,"ip":0,"op":92,"st":-59,"bm":0}],"markers":[]}`;
    
    var animation = bodymovin.loadAnimation({
        container : document.getElementById("circleAnim"),
        render: 'svg',
        loop: false,
        autoplay:false,
        animationData: JSON.parse(json)
    });
    
        var circleController = document.getElementById('second-section-container');
        var circleTitle = document.getElementById('second-section-title'); 
        var circleTextUnderline = document.getElementById('second-section-line');    

    main.addEventListener("click", () => {   

        if(main.classList.contains('on')) {

            document.getElementById("second").classList.remove('hidden');

            circleController.classList.remove("false");
            circleController.classList.add("true");             
    
            circleTitle.classList.remove('hideTransitionAnimLeft'); 
            circleTitle.classList.remove('hidden'); 
            circleTitle.classList.add('transitionAnimLeft');   
    
            animation.setDirection(1);    
            animation.setSpeed(1.3);
            animation.play();
            animation.loop = true;
            
            circleTextUnderline.classList.remove('hidden'); 
    
            } else if(main.classList.contains('off')){      
                
                document.getElementById("second").classList.add('hidden');
                 
                circleTitle.classList.add('hideTransitionAnimLeft'); 
                circleTitle.classList.remove('transitionAnimLeft'); 
    
                circleController.classList.remove("true");                 
                circleController.classList.add("false");     
                
                circleTextUnderline.classList.add('hidden'); 
                
                animation.setDirection(-1);
                animation.setSpeed(1.8);
                animation.play();     
                animation.loop = false;       
            }
    
        }); 
    
    }); 